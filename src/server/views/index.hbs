<!DOCTYPE html>
<html lang="en" >

<head>
  <meta charset="UTF-8">
  <title>#codevember 07-2016 <Hexagon Weather Widgets></title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">

  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Raleway:400,700,800'>

  <link rel="stylesheet" href="stylesheets/style.css">

  <script>
  window.onload = function () {
  var itemp = JSON.parse(decodeURIComponent("{{{itemp}}}"));
  var otemp = JSON.parse(decodeURIComponent("{{{otemp}}}"));
  var ihum = JSON.parse(decodeURIComponent("{{{ihum}}}"));
  var ohum = JSON.parse(decodeURIComponent("{{{ohum}}}"));

  //Better to construct options first and then pass it as a parameter
  var tempData = {
    title: {
      text: "Temperature Data"
    },
   
    responsive: true,
    animationEnabled: true,
    exportEnabled: true,
    
    data: [
      {
        type: "line", //change it to line, area, column, pie, etc
        dataPoints: otemp,
        lineColor:"orange"
      },
      {
        type: "line", //change it to line, area, column, pie, etc
        dataPoints: itemp,
        lineColor:"black"
      }
    ],
  
  };

  var HumData = {
    title: {
      text: "Beehive Data"
    },
    responsive: true,
    animationEnabled: true,
    exportEnabled: true,
    data: [
    {
      type: "line", //change it to line, area, column, pie, etc
      dataPoints: ihum,
      lineColor:"orange"
    }, {
      type: "line", //change it to line, area, column, pie, etc
      dataPoints:ohum,
      lineColor:"black"
    }
    ],
  };
  
  $("#beehivetemp").CanvasJSChart(tempData);
  $("#beehivehumidity").CanvasJSChart(HumData);

  }
  </script>
</head>

<body>
  <center><h1>Embedded Programming Coursework</h1></center>
  <br/>
  <br/>

  <div class="row">
    <div class="hex slide snow">
      <div class="front">
        <h5>Outside temperature</h5>
        <h3>{{recentData.otemp}}째C</h3>
      </div>
    </div>

    <div class="hex slide storm">
      <div class="front">
        <h5>Inside temperature</h5>
        <h3>{{recentData.itemp}}째C</h3>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="hex slide rain">
      <div class="front">
        <h5>Outside humidity</h5>
        <h3>{{recentData.ohum}}째C</h3>
      </div>
    </div>
    
    <div class="hex slide moon">
      <div class="front">
        <h5>Inside humidity</h5>
        <h3>{{recentData.ihum}}째C</h3>
      </div>
    </div>

    <div class="hex slide sunny">
      <div class="front">
        <h5>Beehive weight</h5>
        <h3>10g</h3>
      </div>
    </div>
  </div>
  <br/>
  <br/>
  <br/>
  <br/>
  <br/>


  <center><div id="beehivetemp" style="height: 370px; width: 50%;"></div></center>
  <br>
  <br>
  <center><div id="beehivehumidity" style="height: 370px; width: 50%;"></div></center>
  <br>
  <script src="https://canvasjs.com/assets/script/jquery-1.11.1.min.js"></script>
  <script src="https://canvasjs.com/assets/script/jquery.canvasjs.min.js"></script>
  <script src='https://use.fontawesome.com/97152d9c6b.js'></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    var socket = io();
    console.log("done initing socket");
    socket.on('new_data',(data)=>{
      alert("hello maysara");
      console.log("hello its me maysara I got the new deta");
    });
  </script>
</body>
</html>
